# 📖 使用者操作指南

歡迎使用 **THE FOCUS ENFORCER**。本指南將教您如何正確設定並使用本系統來強化您的專注力。

---

## 🎭 1. 準備「人質」 (Hostage Management)

在開始專注之前，您必須提供「抵押品」。

1. 開啟儀表板，進入 **人質管理 (Hostage Manager)** 區塊。
2. 上傳 1-30 張您的「黑歷史」照片或尷尬自拍。
3. 勾選您想要在違規時被發布的照片。
4. **注意**: 這些照片將在您違規時被自動發布，請謹慎選擇。

---

## 🌐 2. 設定社交平台 (Social Settings)

設定系統在違規時發布訊息的管道。

### Discord Webhook
- 在 Discord 頻道設定中建立 Webhook，並將 URL 貼入設定欄位。
- 違規時，系統會在該頻道發布處刑訊息。

### Gmail (SMTP)
- 使用 Gmail 需要申請「應用程式密碼」。
- 設定收件人清單（例如：您的好友、導師或父母）。
- 違規時，系統會發送帶有人質照片的郵件給他們。

### Threads (自動化發文)
- 系統使用 Playwright 模擬瀏覽器登入。
- 首次使用需在 `credentials.json` 中填入帳密，或透過介面引導登入。

---

## ⏱️ 3. 開始專注任務 (Focus Session)

1. **放置手機**: 將手機放入監控盒子，確保 NFC 讀卡器偵測到手機。
2. **關閉盒蓋**: 確保盒子蓋好，光感測器偵測到黑暗狀態（儀表板顯示「盒蓋已關閉」）。
3. **設定時間**: 在儀表板設定您想要專注的分鐘數。
4. **啟動**: 點擊「開始專注」。此時系統開始監控所有感測器。

---

## ⚙️ 4. 懲罰觸發設定 (Penalty Configuration)

在儀表板的 **懲罰設定面板** 中，您可以自定義哪些行為會觸發懲罰：

- **手機偵測**: 若關閉，取出手機不會觸發懲罰。
- **在座偵測**: 若關閉，離開座位不會觸發懲罰。
- **噪音偵測**: 若關閉，環境吵雜不會觸發懲罰。
- **開盒偵測**: 若關閉，打開盒子不會觸發懲罰。
- **噪音閾值**: 滑動調整觸發懲罰的分貝數 (dB)，預設為 70dB。

---

## 🚨 5. 違規與懲罰 (Violations & Penalties)

在專注期間，若觸發了已啟用的偵測項目，將被視為**違規**：
- **手機離位**: NFC 偵測到手機被取出。
- **擅自離開**: 雷達偵測到使用者不在座位上超過一定時間。
- **非法開盒**: 光感測器偵測到盒子被打開（環境變亮）。
- **環境吵雜**: 麥克風偵測到持續的高分貝噪音超過設定閾值。

**一旦違規**:
1. 系統會發出警告音效。
2. 儀表板會顯示「違規偵測中」。
3. 若未在緩衝時間內恢復，系統將執行 **社交羞辱協定**，發布您選取的人質照片。

---

## 🎮 6. 模擬模式 (Mock Mode)

如果您沒有實體硬體，可以在 `backend/app/config.py` 中將 `MOCK_HARDWARE` 設為 `True`。
- 系統會自動產生模擬的感測器數據。
- 您可以透過儀表板右側的 **開發者面板** 手動控制：
    - 放入/取出手機
    - 人員在座/離座
    - 開啟/關閉盒蓋
    - 觸發無效 NFC

---

## 🛠️ 7. 硬體監控視窗 (Monitor)

如果您是開發者或想查看底層數據：
1. 點擊儀表板上的「監聽視窗」。
2. 您可以即時看到 D1 Mini 傳回的原始 JSON 數據與系統日誌。
3. 訊息分類：
   - 🔴 **錯誤**: 硬體連線中斷或感測器異常。
   - 🔵 **數據**: 感測器的數值更新。
   - ⚪ **一般**: 系統狀態切換訊息。

